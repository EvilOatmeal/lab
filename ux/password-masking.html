<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Password Masking</title>
</head>
<body>

<h1>Password Masking</h1>

<ul>
	<li><a href="http://uxdesign.smashingmagazine.com/2012/10/26/password-masking-hurt-signup-form/">http://uxdesign.smashingmagazine.com/2012/10/26/password-masking-hurt-signup-form/</a></li>
</ul>

<h2>A registration form</h2>

<p>
	<label for="email">Email:</label>
	<input type="text" name="email" id="email" value="foo@bar.me">
</p>

<p>
	<label for="pass">Password:</label>
	<input type="password" name="password" id="pass" value="p4ssw0rd">

	<input type="checkbox" id="show-pass">
	<label for="show-pass">Show password while typing</label>
</p>

<p><button>Register now!</button></p>

<p><strong>Bug when using 'input' event?</strong> selectionStart goes back one character after inserting the first character when changing to type=text on the 'input' event. What's up with that?</p>

<script>
	(function(d) {
		var pass = d.getElementById('pass'),
			show = d.getElementById('show-pass'),
			timer;

		function showPass() {
			if (show.checked) {
				pass.setAttribute('type', 'text');
				clearTimeout(timer);
				timer = setTimeout(hidePass, 2000);
			}
		}

		function hidePass() {
			pass.setAttribute('type', 'password');
		}

		pass.addEventListener('focus', showPass, false);
		// Using 'keydown' instead of 'input' event because selectionStart
		// goes back one character after inserting the first character
		// when changing to type=text on 'input' event.
		pass.addEventListener('keydown', showPass, false);
		pass.addEventListener('blur', hidePass, false);
	}(document));
</script>

</body>
</html>